
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BDD Test Report</title>
<link href="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
<style>
body { font-family: Arial, sans-serif; margin:0; display:flex; height:100vh; }
.sidebar { width:250px; background:#2f3e46; color:white; overflow:auto; padding:15px; }
.sidebar h2 { font-size:18px; margin-top:0; }
.sidebar ul { list-style:none; padding-left:0; }
.sidebar li { cursor:pointer; padding:5px; }
.sidebar li:hover { background:#354f52; }
.sidebar li.collapsed::before { content: '▶ '; }
.sidebar li.expanded::before { content: '▼ '; }
.main { flex:1; overflow:auto; padding:20px; background:#f0f0f0; }
.card { background:white; padding:15px; margin-bottom:15px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.card[data-status="passed"] { border-left:4px solid #4caf50; }
.card[data-status="failed"] { border-left:4px solid #f44336; }
.card[data-status="skipped"] { border-left:4px solid #ff9800; }
.step { padding:5px 0; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; position:relative; }
.step img { max-height:60px; margin-left:10px; border:1px solid #ccc; border-radius:4px; margin-top:5px;}
.step .tooltip { visibility:hidden; background:rgba(0,0,0,0.8); color:white; text-align:left; padding:5px; border-radius:4px; position:absolute; z-index:10; top:25px; left:0; font-size:12px; max-width:250px; }
.step:hover .tooltip { visibility:visible; }
h3 { margin-top:0; }
.slider-container { margin-top:10px; }
.filter-btn { cursor:pointer; padding:5px 10px; background:#52796f; margin:2px; display:inline-block; border-radius:4px; font-size:12px; }
.filter-btn:hover { background:#354f52; }
.charts-container { display:flex; justify-content:space-between; flex-wrap:wrap; gap:20px; margin-bottom:20px; }
.chart-box { flex:1; min-width:300px; max-width:400px; background:white; padding:10px; border-radius:8px; box-shadow:0 1px 3px rgba(0,0,0,0.1);}
.summary-container { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; margin-bottom:20px; }
.summary-box { flex:1; min-width:200px; background:#fff; padding:10px; border-radius:8px; box-shadow:0 1px 3px rgba(0,0,0,0.1); margin:5px; text-align:center; }
</style>
</head>
<body>
<div class="sidebar">
  <h2>Filters</h2>
  <div>
      <span class="filter-btn" onclick="filterCards('all')">All</span>
      <span class="filter-btn" onclick="filterCards('passed')">Passed</span>
      <span class="filter-btn" onclick="filterCards('failed')">Failed</span>
      <span class="filter-btn" onclick="filterCards('skipped')">Skipped</span>
  </div>
  <h2>Features</h2>
  <ul>
  
      <li class="feature collapsed">
          <span class="feature-title" onclick="toggleFeature('0')">Rahul Shetty Academy Homepage</span>
          <ul class="scenario-list" id="feature-0" style="display:none;">
          
              <li class="scenario collapsed" 
                  onclick="scrollToScenario('scenario-Rahul Shetty Academy Homepage-0', event)">
                  Verify homepage title
              </li>
          
          </ul>
      </li>
  
      <li class="feature collapsed">
          <span class="feature-title" onclick="toggleFeature('1')">Login functionality - Rahul Shetty Academy</span>
          <ul class="scenario-list" id="feature-1" style="display:none;">
          
              <li class="scenario collapsed" 
                  onclick="scrollToScenario('scenario-Login functionality - Rahul Shetty Academy-0', event)">
                  Successful login with valid credentials
              </li>
          
          </ul>
      </li>
  
  </ul>
</div>

<div class="main">
<h2>BDD Test Report</h2>
<div style="margin-bottom:15px;">
    <input type="text" id="searchBox" placeholder="Search features or scenarios..." 
        style="width:100%; padding:8px; border-radius:5px; border:1px solid #ccc; font-size:14px;">
</div>

<div class="summary-container">
  <div class="summary-box">
    <h3>Total Features</h3>
    <p id="total-features">0</p>
  </div>
  <div class="summary-box">
    <h3>Total Scenarios</h3>
    <p id="total-scenarios">0</p>
  </div>
  <div class="summary-box">
    <h3>Total Steps</h3>
    <p id="total-steps">0</p>
  </div>
  <div class="chart-box">
    <canvas id="summaryChart" height="150"></canvas>
  </div>
</div>

<div class="charts-container">
  <div class="chart-box"><canvas id="overallChart" height="200"></canvas></div>
  <div class="chart-box"><canvas id="scenarioChart" height="200"></canvas></div>
</div>


    <h2>Rahul Shetty Academy Homepage</h2>
    
    <div class="card" id="scenario-Rahul Shetty Academy Homepage-0" data-status="passed">
        <h3>Verify homepage title</h3>
        
        <div class="step">
            <span>✅ Given I open Rahul Shetty Academy homepage</span>
            <div class="tooltip">
                Status: passed<br>
                
                Time: 2026-01-23 05:42:49
            </div>
            
        </div>
        
        <div class="step">
            <span>✅ Then page title should contain "Rahul Shetty Academy"</span>
            <div class="tooltip">
                Status: passed<br>
                
                Time: 2026-01-23 05:42:49
            </div>
            
        </div>
        
    </div>
    

    <h2>Login functionality - Rahul Shetty Academy</h2>
    
    <div class="card" id="scenario-Login functionality - Rahul Shetty Academy-0" data-status="passed">
        <h3>Successful login with valid credentials</h3>
        
        <div class="step">
            <span>✅ Given I open the login page</span>
            <div class="tooltip">
                Status: passed<br>
                
                Time: 2026-01-23 05:42:49
            </div>
            
        </div>
        
        <div class="step">
            <span>✅ When I enter username "rahulshettyacademy"</span>
            <div class="tooltip">
                Status: passed<br>
                
                Time: 2026-01-23 05:42:49
            </div>
            
        </div>
        
        <div class="step">
            <span>✅ And I enter password "Learning@830$3mK2"</span>
            <div class="tooltip">
                Status: passed<br>
                
                Time: 2026-01-23 05:42:49
            </div>
            
        </div>
        
        <div class="step">
            <span>✅ And I click on the sign in button</span>
            <div class="tooltip">
                Status: passed<br>
                
                Time: 2026-01-23 05:42:49
            </div>
            
        </div>
        
    </div>
    

</div>

<script>
// === Sidebar & Scroll ===
function toggleFeature(idx){
    var ul = document.getElementById('feature-'+idx);
    var featureLi = ul.parentElement;
    if(ul.style.display=='none'){ ul.style.display='block'; featureLi.classList.remove('collapsed'); featureLi.classList.add('expanded'); }
    else{ ul.style.display='none'; featureLi.classList.remove('expanded'); featureLi.classList.add('collapsed'); }
}
function scrollToScenario(id, event){ if(event) event.stopPropagation(); document.getElementById(id).scrollIntoView({behavior:'smooth'}); }
window.addEventListener('load', function(){
    document.querySelectorAll('.scenario-list').forEach(list=>{
        list.querySelectorAll('li.scenario.collapsed').forEach(s=>{ s.style.display='none'; });
    });
});

// === Charts & Filters ===
var allCards = [{'name': 'Rahul Shetty Academy Homepage', 'scenarios': [{'name': 'Verify homepage title', 'steps': [{'name': 'Given I open Rahul Shetty Academy homepage', 'result': {'status': 'passed', 'error_message': None}, 'screenshot_before': None, 'screenshot_after': None, 'timestamp': '2026-01-23 05:42:49'}, {'name': 'Then page title should contain "Rahul Shetty Academy"', 'result': {'status': 'passed', 'error_message': None}, 'screenshot_before': None, 'screenshot_after': None, 'timestamp': '2026-01-23 05:42:49'}], 'passed_steps': 2, 'failed_steps': 0, 'skipped_steps': 0, 'status': 'passed'}]}, {'name': 'Login functionality - Rahul Shetty Academy', 'scenarios': [{'name': 'Successful login with valid credentials', 'steps': [{'name': 'Given I open the login page', 'result': {'status': 'passed', 'error_message': None}, 'screenshot_before': None, 'screenshot_after': None, 'timestamp': '2026-01-23 05:42:49'}, {'name': 'When I enter username "rahulshettyacademy"', 'result': {'status': 'passed', 'error_message': None}, 'screenshot_before': None, 'screenshot_after': None, 'timestamp': '2026-01-23 05:42:49'}, {'name': 'And I enter password "Learning@830$3mK2"', 'result': {'status': 'passed', 'error_message': None}, 'screenshot_before': None, 'screenshot_after': None, 'timestamp': '2026-01-23 05:42:49'}, {'name': 'And I click on the sign in button', 'result': {'status': 'passed', 'error_message': None}, 'screenshot_before': None, 'screenshot_after': None, 'timestamp': '2026-01-23 05:42:49'}], 'passed_steps': 4, 'failed_steps': 0, 'skipped_steps': 0, 'status': 'passed'}]}];
function getChartData(status){
    var passed=0, failed=0, skipped=0; var labels=[], pData=[], fData=[], sData=[];
    allCards.forEach(f=>{ f.scenarios.forEach(s=>{
        if(status==='all'||s.status===status){ labels.push(s.name); pData.push(s.passed_steps); fData.push(s.failed_steps); sData.push(s.skipped_steps); }
        passed+=s.passed_steps; failed+=s.failed_steps; skipped+=s.skipped_steps;
    })});
    return {labels,pData,fData,sData,passed,failed,skipped};
}

function computeTotals(){
    var totalFeatures=allCards.length,totalScenarios=0,totalSteps=0,passed=0,failed=0,skipped=0;
    allCards.forEach(f=>{ totalScenarios+=f.scenarios.length; f.scenarios.forEach(s=>{
        totalSteps+=s.passed_steps+s.failed_steps+s.skipped_steps;
        passed+=s.passed_steps; failed+=s.failed_steps; skipped+=s.skipped_steps;
    })});
    document.getElementById('total-features').innerText=totalFeatures;
    document.getElementById('total-scenarios').innerText=totalScenarios;
    document.getElementById('total-steps').innerText=totalSteps;
    return {passed,failed,skipped};
}

var totals = computeTotals();
var summaryCtx = document.getElementById('summaryChart').getContext('2d');
var summaryChart = new Chart(summaryCtx,{
    type:'doughnut',
    data:{labels:['Passed','Failed','Skipped'], datasets:[{data:[totals.passed,totals.failed,totals.skipped], backgroundColor:['#4caf50','#f44336','#ff9800']}]},
    options:{responsive:true, plugins:{legend:{position:'bottom'}}, onClick:function(evt,items){ if(items.length>0){ filterCards(this.data.labels[items[0].index].toLowerCase()); }} }
});

var overallCtx = document.getElementById('overallChart').getContext('2d');
var scenarioCtx = document.getElementById('scenarioChart').getContext('2d');
var chartData = getChartData('all');
var overallChart = new Chart(overallCtx,{ type:'doughnut', data:{labels:['Passed','Failed','Skipped'], datasets:[{data:[chartData.passed,chartData.failed,chartData.skipped], backgroundColor:['#4caf50','#f44336','#ff9800']}]}, options:{responsive:true, plugins:{legend:{position:'bottom'}}, onClick:function(evt,items){ if(items.length>0){ filterCards(this.data.labels[items[0].index].toLowerCase()); }} } });
var scenarioChart = new Chart(scenarioCtx,{ type:'bar', data:{labels:chartData.labels, datasets:[{label:'Passed',data:chartData.pData,backgroundColor:'#4caf50'}, {label:'Failed',data:chartData.fData,backgroundColor:'#f44336'}, {label:'Skipped',data:chartData.sData,backgroundColor:'#ff9800'}]}, options:{responsive:true, plugins:{legend:{position:'bottom'}}, scales:{x:{stacked:true}, y:{stacked:true}}, onClick:function(evt,items){ if(items.length>0){ var index=items[0].index; var scenarioName=this.data.labels[index]; var cardId=null; allCards.forEach(f=>{ f.scenarios.forEach((s,i)=>{ if(s.name===scenarioName) cardId='scenario-'+f.name+'-'+i; });}); if(cardId) scrollToScenario(cardId); } } } });

function updateCharts(filterStatus){ 
    var data=getChartData(filterStatus); 
    overallChart.data.datasets[0].data=[data.passed,data.failed,data.skipped]; overallChart.update();
    scenarioChart.data.labels=data.labels; scenarioChart.data.datasets[0].data=data.pData; scenarioChart.data.datasets[1].data=data.fData; scenarioChart.data.datasets[2].data=data.sData; scenarioChart.update(); 
}
function filterCards(status){
    var cards=document.querySelectorAll('.card'); cards.forEach(c=>{ c.style.display=(status==='all'||c.getAttribute('data-status')===status)?'block':'none'; });
    document.querySelectorAll('.scenario-list').forEach(list=>{ list.querySelectorAll('li.scenario').forEach(s=>{
        s.style.display=(status==='failed')? (s.classList.contains('expanded')?'block':'none'):'block';
    })});
    updateCharts(status);
}

document.getElementById('searchBox').addEventListener('input', function(){
    var query = this.value.toLowerCase();
    document.querySelectorAll('.card').forEach(card=>{
        var scenarioName = card.querySelector('h3').innerText.toLowerCase();
        var featureName = card.id.split('-')[1].toLowerCase();
        card.style.display = (scenarioName.includes(query) || featureName.includes(query)) ? 'block' : 'none';
    });
});
</script>
</body>
</html>